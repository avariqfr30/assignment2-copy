<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Alice's Cool Bike Shop</title>
    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <!-- Fontawesome core CSS -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <!-- GOOGLE FONT -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <!-- Slide Show Css -->
    <link href="assets/ItemSlider/css/main-style.css" rel="stylesheet" />
    <!-- custom CSS here -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <!-- Google Pay API -->
    <script async src="https://pay.google.com/gp/p/js/pay.js"></script>
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AYPy9MSRhZq1nrKgWqc60Q9BkumN-9dZU8lYAUx2QDLyE2XRTGbRzphqg0yQESHTYMfzdxOdwKSeqOxF&currency=AUD"></script>
    <!-- Stripe SDK -->
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body onload="onGooglePayLoaded()">
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"><strong>ALICE'S</strong> ELECTRONIC BIKE Shop</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#">Track Order</a></li>
                    <li><a href="#">Login</a></li>
                    <li><a href="#">Signup</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">24x7 Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#"><strong>Call: </strong>+61-000-000-000</a></li>
                            <li><a href="#"><strong>Mail: </strong>info@alicebikeshop.com</a></li>
                            <li class="divider"></li>
                            <li><a href="#"><strong>Address: </strong>
                                <div>
                                    Melbourne,<br />
                                    VIC 3000, AUSTRALIA
                                </div>
                            </a></li>
                        </ul>
                    </li>
                </ul>
                <form class="navbar-form navbar-right" role="search">
                    <div class="form-group">
                        <input type="text" placeholder="Enter Keyword Here ..." class="form-control">
                    </div>
                      
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <div>
                    <ol class="breadcrumb">
                        <li class="active">Computers</li>
                    </ol>
                </div>
                <!-- /.div -->
                <div class="row">
                    <div class="btn-group alg-right-pad">
                        <button type="button" class="btn btn-default"><strong>1235  </strong>items</button>
                        <div class="btn-group">
                            <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
                                Sort Products  
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="#">By Price Low</a></li>
                                <li class="divider"></li>
                                <li><a href="#">By Price High</a></li>
                                <li class="divider"></li>
                                <li><a href="#">By Popularity</a></li>
                                <li class="divider"></li>
                                <li><a href="#">By Reviews</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /.row -->
                <div class="row">
                    <div class="col-md-4 text-center col-sm-6 col-xs-6">
                        <div class="thumbnail product-box">
                            <img src="assets/img/bronton.jpg" alt="" />
                            <div class="caption">
                                <h3><a href="#">Bronton </a></h3>
                                <p>Price : <strong>$ 3000</strong>  </p>
                                <p><button class="btn btn-success add-to-cart-btn" data-product-id="1">Add To Cart</button> <a href="#" class="btn btn-primary" role="button">See Details</a></p>
                            </div>
                        </div>
                    </div>
                    <!-- /.col -->
                    <div class="col-md-4 text-center col-sm-6 col-xs-6">
                        <div class="thumbnail product-box">
                            <img src="assets/img/dummyimg.jpg" alt="" />
                            <div class="caption">
                                <h3><a href="#">E-BMX </a></h3>
                                <p>Price : <strong>$ 2000</strong>  </p>
                                <p><button class="btn btn-success add-to-cart-btn" data-product-id="2">Add To Cart</button> <a href="#" class="btn btn-primary" role="button">See Details</a></p>
                            </div>
                        </div>
                    </div>
                    <!-- /.col -->
                    <div class="col-md-4 text-center col-sm-6 col-xs-6">
                        <div class="thumbnail product-box">
                            <img src="assets/img/f65.jpg" alt="" />
                            <div class="caption">
                                <h3><a href="#">F-65 </a></h3>
                                <p>Price : <strong>$ 700</strong>  </p>
                                <p><button class="btn btn-success add-to-cart-btn" data-product-id="3">Add To Cart</button> <a href="#" class="btn btn-primary" role="button">See Details</a></p>
                            </div>
                        </div>
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->

    <!-- Cart Page -->
    <div class="container" id="cart-section">
        <h2>Shopping Cart</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Remove</th>
                </tr>
            </thead>
            <tbody id="cart-items">
                <!-- Cart items will be dynamically added here -->
            </tbody>
        </table>
        <div class="text-right">
            <h3>Total: $<span id="cart-total">0.00</span></h3>
        </div>
    </div>

    <!-- Payment Options -->
    <div class="container">
        <h2>Payment Options</h2>
        <div class="payment-options">
            <button class="btn btn-light" onclick="selectPaymentMethod('paypal')">
                <img src="assets/img/paypal.png" alt="PayPal" style="width: 100px;">
            </button>
            <button class="btn btn-light" onclick="selectPaymentMethod('stripe')">
                <img src="assets/img/stripe.png" alt="Stripe" style="width: 100px;">
            </button>
            <button class="btn btn-light" onclick="selectPaymentMethod('manual')">
                <img src="assets/img/credit-card.png" alt="Credit/Debit Card" style="width: 100px;">
            </button>
        </div>
        <form id="payment-form">
            <input type="hidden" id="payment-method" name="payment-method">
        </form>
        <div id="paypal-button-container"></div> <!-- PayPal button container -->
        <div id="stripe-button-container"></div> <!-- Stripe button container -->
        <div id="google-pay-button-container"></div> <!-- Google Pay button container -->
        <div id="manual-payment-container" style="display: none;">
            <h3>Enter your card details</h3>
            <form id="manual-payment-form">
                <div class="form-group">
                    <label for="card-number">Card Number</label>
                    <input type="text" class="form-control" id="card-number" placeholder="Card Number" required>
                </div>
                <div class="form-group">
                    <label for="card-expiry">Expiry Date</label>
                    <input type="text" class="form-control" id="card-expiry" placeholder="MM/YY" required>
                </div>
                <div class="form-group">
                    <label for="card-cvc">CVC</label>
                    <input type="text" class="form-control" id="card-cvc" placeholder="CVC" required>
                </div>
                <button type="submit" class="btn btn-primary">Pay Now</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <div class="col-md-12 footer-box">
        <div class="col-md-4">
            <strong>Our Location</strong>
            <hr>
            <p>
                Swanston St, Melbourne,<br />
                VIC 3000, Australia<br />
                Call: +61-000-000-000<br />
                Email: info@alicebikeshop.com<br />
            </p>
            2020 www.alicebikeeshop.com | All Right Reserved
        </div>
    </div>
    <hr>
    <div class="col-md-12 end-box">
        © 2020 |   All Rights Reserved |   www.alicebikeshop.com |   24x7 support |   Email us: info@alicebikeshop.com
    </div>

    <!-- Core JavaScript file -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <!-- Bootstrap JavaScript file -->
    <script src="assets/js/bootstrap.js"></script>
    <!-- Slider JavaScript file -->
    <script src="assets/ItemSlider/js/modernizr.custom.63321.js"></script>

        // Stripe Payment Method
        const stripe = Stripe('pk_test_51Q0Q2I2a4Qu8DqLY3c97bhGrAe0I3Hu5AxBGjZePyQ0k9JJxG6N2KFMIJsxzijytGk4vNbYoTehS6ib9GwpS3HBo00t0fvCDYY');
        
        function renderStripeButton() {
            const button = document.createElement('button');
            button.textContent = 'Pay with Stripe';
            button.className = 'btn btn-primary';
            button.onclick = handleStripePayment;
            document.getElementById('stripe-button-container').appendChild(button);
        }

        async function handleStripePayment() {
            const response = await fetch('http://localhost:4242/create-checkout-session', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    items: cart.map(item => ({
                        name: item.name,
                        price: item.price,
                        quantity: item.quantity
                    }))
                })
            });

            const session = await response.json();

            const { error } = await stripe.redirectToCheckout({
                sessionId: session.id
            });

            if (error) {
                console.error(error);
                alert('Payment failed: ' + error.message);
            }
        }

        // Render Manual Payment Form
        function renderManualPaymentForm() {
            document.getElementById('manual-payment-container').style.display = 'block';
        }

        // Handle Manual Payment Form Submission
        document.getElementById('manual-payment-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const cardNumber = document.getElementById('card-number').value;
            const cardExpiry = document.getElementById('card-expiry').value;
            const cardCvc = document.getElementById('card-cvc').value;

            // Validate card details (basic validation)
            if (!validateCardDetails(cardNumber, cardExpiry, cardCvc)) {
                alert('Invalid card details. Please check and try again.');
                return;
            }

            // Show confirmation popup
            const confirmation = confirm(`You are about to pay $${calculateTotalPrice()}. Do you want to proceed?`);
            if (confirmation) {
                // Simulate payment processing (no actual charge)
                alert('Payment successful!');
                window.location.href = 'payment_successful.php';
            }
        });

        function validateCardDetails(cardNumber, cardExpiry, cardCvc) {
            // Basic validation for card number, expiry date, and CVC
            const cardNumberRegex = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/; // Visa or MasterCard
            const cardExpiryRegex = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
            const cardCvcRegex = /^[0-9]{3,4}$/;

            return cardNumberRegex.test(cardNumber) && cardExpiryRegex.test(cardExpiry) && cardCvcRegex.test(cardCvc);
        }

        // Calculate total price based on cart items
        function calculateTotalPrice() {
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.quantity;
            });
            return total.toFixed(2);
        }
    </script>
</body>
</html>